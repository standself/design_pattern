<!DOCTYPE html>
<html>
<head>
	<title>链模式</title>
	<meta charset="utf-8"/>
</head>
<body>
<div id="demo"></div>
<span id="test"></span>

<script type="text/javascript">
	var A = function(selector, context) {
		//为了减少变量的创建，把B看作是A的属性设置;
		//return B;
		//在A.fn 中提供一个获取元素的init方法
		return new A.fn.init(selector);
	};
	//var B = A.prototype = {
	A.fn = A.prototype = {
		constructor: A,
		push: [].push,
		pop: [].pop,
		sort: [].sort,
		splice: [].splice,
		init: function(selector, context) {
			//获取元素长度
			this.length = 0;
			//默认获取元素的上下文为document
			context = context || document;
			//如果是id选择符，按位非将-1转化为0，转化为布尔值false
			if ( ~selector.indexOf("#") ) {
				//截取id并选择
				this[0] = document.getElementById(selector.slice(1));
				console.log(this[0]);
				this.length = 1;
			//如果是元素名称
			} else {
				//在上下文中选择元素
				var doms = context.getElementsByTagName(selector),
					i = 0,
					len = doms.length;
				for (; i < len; i++ ) {
					this[i] = doms[i];
				}
				//校正长度
				this.length = len;
			}
			this.context = context;
			this.selector = selector;
			return this;
		},
		length: 2,
		size: function() {
			return this.length;
		}
	};

	A.fn.init.prototype = A.fn;

	//对象拓展
	A.extend = A.fn.extend = function() {
		//拓展对象从第二个参数算起
		var i = 1,
			len = arguments.length,
			target = arguments[0],
			j;//拓展对象的属性
		//如果只传一个参数, 则拓展对象也包含了第一个
		if ( i == len ) {
			target = this;
			i--;
		}
		for ( ; i < len; i++ ) {
			for ( j in arguments[i] ) {
				target[j] = arguments[i][j]
			}
		}
		return target;
	}
	//test
	var test = A("#test");
	console.log(test);
	var demo = A.extend({first: 1}, {second:2}, {third: 3});
	console.log(demo);

	//添加方法
	A.fn.extend({
		//添加事件
		on: (function(){
			//标准浏览器DOM2级事件
			if ( document.addEventListener ) {
				return function(type, fn) {
					var i = this.length - 1;
					for (; i >= 0; i-- ) {
						this[i].addEventListener(type, fn, false);
					}
					return this;
				}
			} else if ( document.attachEvent ) {
				return function(type, fn) {
					var i = this.length - 1;
					for (; i >= 0; i-- ) {
						this[i].attachEvent("on" + type, fn);
					}
					return this;
				}
			} else {
				return function(type, fn) {
					var i = this.length - 1;
					for ( ; i >= 0; i-- ) {
						this[i]["on" + type] = fn;
					}
					return this;
				}
			}
		})(),
		//下划线或者分隔符命名变驼峰
		camelCase: function(str) {
			return str.replace(/[\_\-](\w)/g, function(all, letter) {
				return letter.toUpperCase();
			});
		}
	});
	var str = "background-color";
	var str2 = "background_color";
	console.log(A.fn.camelCase(str));
	console.log(A.fn.camelCase(str2));
</script>
</body>
</html>