<!DOCTYPE html>
<html>
<head>
	<title>享元模式</title>
	<meta charset="utf-8" />
</head>
<body>
	<script type="text/javascript">
		//新闻下一页
		/*
		var Flyweight = function() {
			//已经创建的元素
			var created = [];
			//创建一个新闻包装器
			function create() {
				var dom = document.createElement("div");
				//将容器插入新闻列表容器中 
				document.getElementById("container".appendChild(dom));
				//缓存新建的元素
				created.push(dom);
				//返回新建的元素
				return dom;
			}
			return {
				//获取创建新闻元素方法
				getDiv: function() {
					//如果已创建的元素小于当前页元素总个数，则创建
					if ( created.length < 5 ) {
						return create();
					} else {
						//获取第一个元素，并插入最后面
						var div = created.shift();
						created.push(div);
						return div;
					}
				}
			}
		}();

		var paper = 0,
			num = 5,
			len = article.length;
		//添加5条新闻
		for( var i= 0; i < 5; i++ ) {
			if ( article[i] ) Flyweight.getDiv().innerHTML = article[i]; //  通过享元类获取创建的元素并写入新闻内容 
		}

		//下一页按钮绑定事件 
		document.getElementById("next_page").onclick = function() {
			//如果新闻内容不足5条，则返回
			if ( article.length < 5 ) return;
			var n = ++paper * num % len,//获取当前页的第一条新闻索引
				j = 0;//循环用变量
			//插入5条新闻
			for ( ; j < 5; j++ ) {
				//如果存在第 n + j 条，则插入
				if ( article[n + j] ){
					Flyweight.getDiv().innerHTML = article[n+j];
				// 否则插入起始位置第 n + j - len 条
				} else if ( article[n+j-len] ) {
					Flyweight.getDiv().innerHTML = article[n+j-len];
				//如果都不存在就插入空字符串
				} else {
					Flyweight.getDiv().innerHTML = "";
				}
			}
		}
		*/

		//享元动作
		var Flyweight = {
			moveX: function(x) {
				this.x = x;
			},
			moveY: function(y) {
				this.y = y;
			}
		}

		var Player = function(x, y, c) {
			this.x = x;
			this.y = y;
			this.color = c;
		}
		Player.prototype = Flyweight;
		Player.prototype.changeC = function(c) {
			this.color = c;
		};

		var Spirit = function(x, y, r) {
			this.x = x;
			this.y = y;
			this.r = r;
		};
		Spirit.prototype = Flyweight;
		Spirit.prototype.changeR = function(r) {
			this.r = r;
		};

		//创建一个人
		var player1 = new Player(5, 6, "red");
		console.log(player1);
		console.log(Player.prototype.changeR);
		player1.changeC("pink");
		console.log(player1);
	</script>

</body>
</html>